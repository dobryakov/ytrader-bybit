Проанализируй код и оцени соответствие реализации следующему процессу:
---
1. Модель принимает решение создать buy-ордер и выдаёт торговый сигнал. При этом учитываются текущие ордера и открытые позиции по конкретной валюте.
2. Ордер менеджер оценивает сигнал, выставляет ордер на bybit и проверяет его корректную постановку, лимиты, ограничения и прочее.
3. Позишен менеджер получает информацию об изменении позиций, в том числе по ранее выставленным ордерам.
4. Модель слышит эту информацию и в нужный момент принимает решение о выставлении sell-ордера (учитывая все текущие открытые позиции), выдаёт торговый сигнал.
5. Ордер менеджер выставляет sell-ордер на bybit и проверяет его корректную постановку.
6. По исполнению ордера, модель узнаёт удалось ли получить прибыль или понести убытки, и корректирует свою стратегию (дообучается ML).
7. Этот механизм универсально работает для всех валют, по которым есть баланс на бирже, модель знает текущие балансы и самостоятельно принимает решения в каких валютах работать.
---
Пока не вноси изменений в код.


Напиши один или несколько автотестов на всю эту цепочку end-to-end, начиная с триггера в модели по созданию buy-ордера (это можно имитировать путём отправки торгового сигнала в rabbitmq), включая фактическую постановку ордеров на bybit и отслеживание реальных позиций с bybit по вебсокетам на ws-gateway.

